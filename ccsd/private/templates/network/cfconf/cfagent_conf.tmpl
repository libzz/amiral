#*doc-module:
crcnetd - CRCnet Configuration System Daemon Template

This template controls the operation of cfagent on a biscuit PC
*#
#attr $author = "Matt Brown <matt@crc.net.nz>"
#attr $version = "$Id$"
#attr $copyright = "Copyright (C) 2006  The University of Waikato"
#attr $license = "No usage or redistribution rights are granted. See LICENSE for details."
#attr $eventList = []
#attr $fileName = "cfagent.conf"
#from crcnetd._utils.ccsd_cfengine import ccs_template
#extends ccs_template
#compiler-settings
## Change the Cheetah start tokens so that we don't conflict with CFengine
cheetahVarStartToken = %
directiveStartToken = !
commentStartToken = !!
EOLSlurpToken = ^^^
#end compiler-settings
#############################################################
#
# cfagent.conf -- for %domain
# $Date$
#
# This file is the main configuration file for all hosts.
#
# WARNING: Do not modify this file since it is automatically
#          generated by cf.py
#
#############################################################

###########
#
# BEGIN cfagent.conf
#
###########

control:

    OutputPrefix = ( "$(host):" )
    AddInstallable = ( !slurp
!for %distribution_id,%distrib in %distributions.items()
 Distrib_%distrib.name!slurp
!end for
 CPE!slurp
!for %serviceName,%service in %services.items()
 Service_%serviceName!slurp
!end for
 )

import:

    # Main configuration used for all hosts
    any::
        cf.groups
        cf.main

    # Host specific configuration
    !CPE::
        cf.hostvars
        cf.hostcommands
    CPE:: cf.cpe

    # Distribution specific configuration
!for %distribution_id,%distrib in %distributions.items()
    Distrib_%distrib.name:: cf.%distrib.name
!end for

    # Service specific configuration
!for %serviceName,%service in %services.items()
    Service_%serviceName::  cf.%serviceName
!end for

###########
#
# END cfagent.conf
#
###########
